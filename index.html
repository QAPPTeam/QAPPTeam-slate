
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#users" class="toc-h1 toc-link" data-title="Users">Users</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#signup-endpoints-researcher" class="toc-h2 toc-link" data-title="Signup endpoints -- researcher">Signup endpoints -- researcher</a>
                  </li>
                  <li>
                    <a href="#signup-endpoints-researcher-2" class="toc-h2 toc-link" data-title="Signup endpoints -- researcher">Signup endpoints -- researcher</a>
                  </li>
                  <li>
                    <a href="#login-endpoint" class="toc-h2 toc-link" data-title="Login endpoint">Login endpoint</a>
                  </li>
                  <li>
                    <a href="#user-update-endpoint" class="toc-h2 toc-link" data-title="User Update Endpoint">User Update Endpoint</a>
                  </li>
                  <li>
                    <a href="#researcher-participant" class="toc-h2 toc-link" data-title="researcher | participant">researcher | participant</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#studies" class="toc-h1 toc-link" data-title="Studies">Studies</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-studies" class="toc-h2 toc-link" data-title="Create studies">Create studies</a>
                  </li>
                  <li>
                    <a href="#get-studies-by-their-id" class="toc-h2 toc-link" data-title="get Studies by their ID">get Studies by their ID</a>
                  </li>
                  <li>
                    <a href="#get-studies-by-other-parameters" class="toc-h2 toc-link" data-title="get studies by other parameters">get studies by other parameters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#todo" class="toc-h1 toc-link" data-title="TODO">TODO</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the API documentation page.</p>

<p>This API is currently being hosted on <a href="https://research-stream.herokuapp.com/">Heroku</a> and uses MongoDB Atlas to host the databases.</p>

<p>This example API documentation page was created with <a href="https://github.com/lord/slate">Slate</a>.</p>
<h1 id='users'>Users</h1><h2 id='signup-endpoints-researcher'>Signup endpoints -- researcher</h2><pre class="highlight javascript tab-javascript"><code>
<span class="kd">let</span> <span class="nx">dataResearcher</span> <span class="o">=</span> <span class="p">{</span> 
                <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"aname"</span><span class="p">,</span>
                <span class="s2">"institution"</span><span class="p">:</span> <span class="s2">"an institution"</span><span class="p">,</span>
                <span class="s2">"department"</span><span class="p">:</span> <span class="s2">"department"</span><span class="p">,</span>
                <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"an address"</span><span class="p">,</span>
                <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"a country"</span><span class="p">,</span>
                <span class="s2">"phonenum"</span><span class="p">:</span> <span class="s2">"a number"</span><span class="p">,</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"an email"</span><span class="p">,</span>
                <span class="s2">"password"</span><span class="p">:</span> <span class="s2">"a password"</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">//this code registers a researcher</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://research-stream.herokuapp.com/user/registerResearcher '</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">dataResearcher</span><span class="p">),</span>
    <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">})</span>

</code></pre>
<blockquote>
<p>Signup endpoints are different for participants and researcher</p>
</blockquote>

<p>This function returns a json of the new user information in the form of the dataResearcher variable and prints this json to the console</p>

<p>HTTP request</p>

<ul>
<li>POST https://research-stream.herokuapp.com/user/registerResearcher </li>
</ul>
<h3 id='parameters-for-researchers'>parameters for researchers</h3>
<ul>
<li>name</li>
<li>institution</li>
<li>department</li>
<li>address</li>
<li>country</li>
<li>phone number</li>
<li>email</li>
<li>password</li>
</ul>
<h2 id='signup-endpoints-researcher-2'>Signup endpoints -- researcher</h2><pre class="highlight javascript tab-javascript"><code>
<span class="kd">let</span> <span class="nx">dataResearcher</span> <span class="o">=</span> <span class="p">{</span> 
                <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"aname"</span><span class="p">,</span>
                <span class="s2">"age"</span><span class="p">:</span> <span class="s2">"a number"</span><span class="p">,</span>
                <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"a city"</span><span class="p">,</span>
                <span class="s2">"phonenum"</span><span class="p">:</span> <span class="s2">"a number"</span><span class="p">,</span>
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"an email"</span><span class="p">,</span>
                <span class="s2">"password"</span><span class="p">:</span> <span class="s2">"a password"</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">//this code registers a researcher</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://research-stream.herokuapp.com/user/registerParticipant '</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">dataResearcher</span><span class="p">),</span>
    <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">})</span>

</code></pre>
<blockquote>
<p>Signup endpoints are different for participants and researcher</p>
</blockquote>

<p>This function returns a json of the new user information in the form of the dataResearcher variable and prints this json to the console</p>

<p>HTTP requests</p>

<ul>
<li>POST https://research-stream.herokuapp.com/user/registerParticipant</li>
</ul>
<h3 id='parameters-for-participants'>parameters for participants</h3>
<ul>
<li>Name</li>
<li>age</li>
<li>city</li>
<li>phone number</li>
<li>email</li>
<li>password</li>
</ul>
<h2 id='login-endpoint'>Login endpoint</h2><pre class="highlight javascript tab-javascript"><code>
<span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span> 
                <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"an email"</span><span class="p">,</span>
                <span class="s2">"password"</span><span class="p">:</span> <span class="s2">"a password"</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">//this code registers a researcher</span>
<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://research-stream.herokuapp.com/user/login '</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
    <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">})</span>

</code></pre>
<p>The User is identified by a unique email
The login endpoint saves a user&#39;s unique ID to a session state to that it can be checked before the user accesses other checkpoints.
All the endpoints following this one require the login endpoint to be run first</p>

<p>Login is accessed via the endpoint</p>

<ul>
<li>https://research-stream.herokuapp.com/user/login</li>
</ul>
<h3 id='login-parameters'>login parameters</h3>
<ul>
<li>email</li>
<li>password</li>
</ul>
<h2 id='user-update-endpoint'>User Update Endpoint</h2>
<blockquote>
<p>to update a participant different data needs to be used but they are both updates using the same endpoint
```javascript
//data variable should be in the same format as the create user data values depending on the type of user
let data = { 
                &quot;name&quot;: &quot;aname&quot;,
                &quot;age&quot;: &quot;a number&quot;,
                &quot;city&quot;: &quot;a city&quot;,
                &quot;phonenum&quot;: &quot;a number&quot;,
                &quot;email&quot;: &quot;an email&quot;,
                &quot;password&quot;: &quot;a password&quot;,
}</p>
</blockquote>

<p>//this code registers a researcher
var response = fetch(&#39;https://research-stream.herokuapp.com/user/update &#39;, {
        method: &quot;POST&quot;
        body: JSON.stringify(data),
    })
  .then(function(response) {
    return response.json();
  })
```
This enpoint updates user information. It does this by calling the create user function which validates input and, if an object with the same id already exists, performes an update action instead of a create action</p>

<p>this endpoint returns a json of the updated user information</p>

<p>HTTP request</p>

<ul>
<li>POST https://research-stream.herokuapp.com/user/update</li>
</ul>
<h2 id='researcher-participant'>researcher | participant</h2>
<p>name | Name
 institution | age
 department | city
 address | phone number
 country | email
 phone number | password
 email
 password</p>
<h1 id='studies'>Studies</h1><h2 id='create-studies'>Create studies</h2>
<blockquote>
<p>before accessing this endpoint, access the login enpoint with researcher credentials
```javascript
let data = {
    &quot;name&quot; : &quot;new study&quot;,
    &quot;details&quot;: &quot;s detail&quot;,
    &quot;lab&quot;: &quot;a lab&quot;,
    &quot;contactInfo&quot; : &quot;some contact information&quot;,
    &quot;location&quot; : &quot;a place&quot;,
    &quot;compensation&quot;: &quot;prob money&quot;,
    &quot;criteria&quot; : &quot;a person&quot;,
    &quot;expectation&quot; : &quot;an expectation&quot;,
    &quot;path&quot;: &quot;<a path to a file>&quot;
}</p>
</blockquote>

<p>var response = fetch(&#39;https://research-stream.herokuapp.com/study/create &#39;, {
        method: &quot;POST&quot;
        body: JSON.stringify(data),
    })
  .then(function(response) {
    return response.json();
  })</p>
<pre class="highlight plaintext"><code>Creates a study and saves it to the studies collection of the database.

The email and the name of the researcher is taken from the login information and the field "ethicsClearance" stores a file for the proof of ethics clearance - the file must be less than 14 mb

This enpdoint is also used to update a study, all fields can be changes except the researcher email and name (unless these are fist changed in the user object)

### HTTP request

* POST https://research-stream.herokuapp.com/study/create

###study paratemers
* name
* details
* lab
* contactInfo
* location
* compensation
* criteria
* expectation


## get all studies
```javascript

var response = fetch('https://research-stream.herokuapp.com/study/get', {
        method: "GET"
    })
  .then(function(response) {
    return response.json();
  })

</code></pre>
<blockquote>
<p>This code return an array of jsons like this</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some details"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lab"</span><span class="p">:</span><span class="w">  </span><span class="s2">"a place"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contactInfo"</span><span class="p">:</span><span class="w">  </span><span class="s2">"info"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w">  </span><span class="s2">"a city"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"compensation"</span><span class="p">:</span><span class="w">  </span><span class="s2">"some form of compensation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"criteria"</span><span class="p">:</span><span class="w">  </span><span class="s2">"study entrant criteria"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expectation"</span><span class="p">:</span><span class="w">  </span><span class="s2">"expectation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w">  </span><span class="s2">"somebody@somewhere.com"</span><span class="w"> </span><span class="p">,</span><span class="w">
    </span><span class="s2">"researcher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a persons name"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint return a list of all studies.</p>

<p>accessible by</p>

<ul>
<li>https://research-stream.herokuapp.com/study/get</li>
</ul>
<h2 id='get-studies-by-their-id'>get Studies by their ID</h2>
<blockquote>
<p>the ethics clearance data of a study is stored as buffer data
```javascript
var responseStudy = fetch(&#39;https://research-stream.herokuapp.com/study/<someID>:id&#39;, {
        method: &quot;GET&quot;
    })
  .then(function(response) {
    return response.json();
  })</p>
</blockquote>

<p>var responseEthics = fetch(&#39;https://research-stream.herokuapp.com/study/<someID>:id/EthicsClearance&#39;, {
        method: &quot;GET&quot;
    })
  .then(function(response) {
    return response.json();
  })
```
These 2 endpoints return 
a) a study by its ID
B) the Ethics Clearance file for a study according to the study ID</p>
<h3 id='http-requests'>HTTP requests</h3>
<ul>
<li>https://research-stream.herokuapp.com/study/id/<someID>:id</li>
<li>https://research-stream.herokuapp.com/study/EthicsClearance/<someID>:id</li>
</ul>
<h3 id='parameters'>parameters</h3>
<ul>
<li>ID of an existing study (in the url)</li>
</ul>
<h2 id='get-studies-by-other-parameters'>get studies by other parameters</h2>
<blockquote>
<p>before accessing any of the folloing endpoints login
```JavaScript
var responseEthics = fetch(&#39;https://research-stream.herokuapp.com/study/name/<someName>&#39;, {
        method: &quot;GET&quot;
    })
  .then(function(response) {
    return response.json();
  })</p>
</blockquote>

<p>var responseEthics = fetch(&#39;https://research-stream.herokuapp.com/study/location/<someLocation>&#39;, {
        method: &quot;GET&quot;
    })
  .then(function(response) {
    return response.json();
  })</p>

<p>var responseEthics = fetch(&#39;https://research-stream.herokuapp.com/study/lab/<some lab>&#39;, {
        method: &quot;GET&quot;
    })
  .then(function(response) {
    return response.json();
  })</p>

<p>var responseEthics = fetch(&#39;https://research-stream.herokuapp.com/study/researcher/<some researcher>&#39;, {
        method: &quot;GET&quot;
    })
  .then(function(response) {
    return response.json();
  }
```</p>

<p>These endpoints return studies by name, location, lab, and researcher, as well as one endpoint to return the proof of ethics clearance for the study matching an id specified.</p>

<p>These studies are returned in a json containging an array of studies in the same format at the endpoint above.</p>

<table><thead>
<tr>
<th>HTTP request</th>
<th>returns</th>
</tr>
</thead><tbody>
<tr>
<td>* https://research-stream.herokuapp.com/study/name/name:<someName></td>
<td>returns all studies under a certain name</td>
</tr>
<tr>
<td>* https://research-stream.herokuapp.com/study/location/location:<someLocation></td>
<td>returns all studies in a specific location</td>
</tr>
<tr>
<td>* https://research-stream.herokuapp.com/study/lab/lab:<someLab></td>
<td>returns all studies performaed in a specific lab</td>
</tr>
<tr>
<td>* https://research-stream.herokuapp.com/study/researcher/researcher:<somereRearcher></td>
<td>returns all studies created by a specific researcher</td>
</tr>
</tbody></table>
<h3 id='parameters-in-urls-of-requests'>parameters (in urls of requests)</h3>
<ul>
<li>a name</li>
<li>a location</li>
<li>a lab</li>
<li>a researcher</li>
</ul>
<h1 id='todo'>TODO</h1>
<ol>
<li>Messageing endpoint documentation</li>
<li>calander intergration</li>
<li>fix error messages to be more consistent and helpful</li>
</ol>
<h1 id='errors'>Errors</h1>
<aside class="notice">
useful error messages are not fully implemented, most errors do not currently return the correct error code
</aside>

<p>API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified user or study could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
</tr>
<tr>
<td>406</td>
<td>Invalid Input</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
